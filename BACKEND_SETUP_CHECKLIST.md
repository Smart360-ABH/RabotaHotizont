# –ß–µ–∫-–ª–∏—Å—Ç: Backend Proxy –¥–ª—è Moderation & Audit

‚úÖ **–ó–∞–≤–µ—Ä—à–µ–Ω–æ:**
- [x] –°–æ–∑–¥–∞–Ω Express —Å–µ—Ä–≤–µ—Ä –≤ `server/`
- [x] –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã –¥–ª—è Reviews, Appeals, Audit
- [x] Admin-–∑–∞—â–∏—Ç–∞ –Ω–∞ –∫—Ä–∏—Ç–∏—á–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ (PUT/DELETE)
- [x] node-fetch –ø—Ä–æ–∫—Å–∏ –∫ Back4App REST API
- [x] –û–±–Ω–æ–≤–ª–µ–Ω —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥ `services/back4appRest.ts` —á—Ç–æ–±—ã —Å–Ω–∞—á–∞–ª–∞ –ø—ã—Ç–∞—Ç—å—Å—è –≤—ã–∑—ã–≤–∞—Ç—å `/api/*`
- [x] –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –æ—Ç–∫–∞—Ç –Ω–∞ Parse SDK –µ—Å–ª–∏ –ø—Ä–æ–∫—Å–∏ –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω
- [x] TypeScript –∫–æ–º–ø–∏–ª–∏—Ä—É–µ—Ç—Å—è –±–µ–∑ –æ—à–∏–±–æ–∫
- [x] –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è —Ä–∞–∑–≤—ë—Ä—Ç—ã–≤–∞–Ω–∏—è (BACKEND_DEPLOYMENT.md)

**–°—Ç–∞—Ç—É—Å:** ‚ú® –ì–æ—Ç–æ–≤ –∫ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é –∏ —Ä–∞–∑–≤—ë—Ä—Ç—ã–≤–∞–Ω–∏—é

---

## –ö–∞–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å

### –õ–æ–∫–∞–ª—å–Ω–æ

1. **–ó–∞–ø—É—Å—Ç–∏—Ç—å backend:**
   ```powershell
   cd server
   cp .env.example .env
   # –û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å .env —Å –≤–∞—à–∏–º–∏ PARSE_APP_ID –∏ PARSE_REST_KEY
   npm install
   npm run dev
   ```
   –°–ª—É—à–∞–µ—Ç –Ω–∞ `http://localhost:4000`

2. **–ó–∞–ø—É—Å—Ç–∏—Ç—å frontend:**
   ```powershell
   npm run dev
   ```
   –°–ª—É—à–∞–µ—Ç –Ω–∞ `http://localhost:3001`

3. **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏:**
   - DevTools Console –±—É–¥–µ—Ç –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å –ø–æ–ø—ã—Ç–∫–∏ –ø—Ä–æ–∫—Å–∏
   - –ï—Å–ª–∏ –±—ç–∫–µ–Ω–¥ –∑–∞–ø—É—â–µ–Ω ‚Äî –∑–∞–ø—Ä–æ—Å—ã –±—É–¥—É—Ç –∏–¥—Ç–∏ –Ω–∞ `/api/*`
   - –ï—Å–ª–∏ –Ω–µ—Ç ‚Äî –æ—Ç–∫–∞—Ç –Ω–∞ Parse SDK

### Production (Render)

–°–º–æ—Ç—Ä–∏ `BACKEND_DEPLOYMENT.md` —Ä–∞–∑–¥–µ–ª "–†–∞–∑–≤—ë—Ä—Ç—ã–≤–∞–Ω–∏–µ –Ω–∞ Render"

---

## –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ   Browser       ‚îÇ
‚îÇ (–§—Ä–æ–Ω—Ç–µ–Ω–¥)      ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
         ‚îÇ /api/*
         ‚îÇ (if proxy available)
         ‚îÇ
         ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ   Express Backend               ‚îÇ
‚îÇ   server/src/index.ts           ‚îÇ
‚îÇ (proxyApiRequest helper)        ‚îÇ
‚îÇ                                 ‚îÇ
‚îÇ GET /api/reviews                ‚îÇ
‚îÇ POST /api/reviews               ‚îÇ
‚îÇ PUT /api/reviews/:id (admin)    ‚îÇ
‚îÇ DELETE /api/reviews/:id (admin) ‚îÇ
‚îÇ                                 ‚îÇ
‚îÇ POST /api/appeals               ‚îÇ
‚îÇ GET /api/appeals (admin)        ‚îÇ
‚îÇ PUT /api/appeals/:id (admin)    ‚îÇ
‚îÇ                                 ‚îÇ
‚îÇ POST /api/audit                 ‚îÇ
‚îÇ GET /api/audit (admin)          ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
         ‚îÇ X-Parse-REST-API-Key
         ‚îÇ (–≤ –∑–∞–≥–æ–ª–æ–≤–∫–µ, –Ω–µ –≤–∏–¥–Ω–∞ –±—Ä–∞—É–∑–µ—Ä—É)
         ‚îÇ
         ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ   Back4App (Parse)              ‚îÇ
‚îÇ   https://parseapi.back4app.com ‚îÇ
‚îÇ                                 ‚îÇ
‚îÇ Classes: Review, Appeal,        ‚îÇ
‚îÇ          AuditLog               ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò

Fallback (–µ—Å–ª–∏ backend –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω):
Browser -> Parse SDK –∏–ª–∏ parseRequest() -> Back4App
```

---

## –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

‚úÖ Parse REST API –∫–ª—é—á –ù–ï –ø–æ–ø–∞–¥–∞–µ—Ç –≤ –±—Ä–∞—É–∑–µ—Ä  
‚úÖ –ú–æ–¥–µ—Ä–∞—Ü–∏—è —Ç—Ä–µ–±—É–µ—Ç admin secret  
‚úÖ –í—Å–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ –ª–æ–≥–∏—Ä—É—é—Ç—Å—è –≤ AuditLog  
‚úÖ –û—Ç–∫–∞—Ç –Ω–∞ SDK –µ—Å–ª–∏ –±—ç–∫–µ–Ω–¥ –¥–∞—É–Ω—É  

‚ö†Ô∏è –í production —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è:
- –ó–∞–º–µ–Ω–∏—Ç—å —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–π ADMIN_SECRET –Ω–∞ JWT
- –î–æ–±–∞–≤–∏—Ç—å rate limiting
- –ù–∞—Å—Ç—Ä–æ–∏—Ç—å CORS –±–æ–ª–µ–µ —Å—Ç—Ä–æ–≥–æ
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å HTTPS

---

## –§–∞–π–ª—ã, –∫–æ—Ç–æ—Ä—ã–µ –±—ã–ª–∏ –¥–æ–±–∞–≤–ª–µ–Ω—ã/–∏–∑–º–µ–Ω–µ–Ω—ã

### –î–æ–±–∞–≤–ª–µ–Ω—ã
- `server/` ‚Äî –≤–µ—Å—å backend —Å Express, TypeScript, package.json, tsconfig
- `BACKEND_DEPLOYMENT.md` ‚Äî –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è —Ä–∞–∑–≤—ë—Ä—Ç—ã–≤–∞–Ω–∏—è

### –ò–∑–º–µ–Ω–µ–Ω—ã
- `services/back4appRest.ts` ‚Äî –¥–æ–±–∞–≤–ª–µ–Ω–∞ —Ñ—É–Ω–∫—Ü–∏—è `proxyApiRequest()`, –æ–±–Ω–æ–≤–ª–µ–Ω—ã review/appeal —Ñ—É–Ω–∫—Ü–∏–∏ —á—Ç–æ–±—ã —Å–Ω–∞—á–∞–ª–∞ –≤—ã–∑—ã–≤–∞—Ç—å –ø—Ä–æ–∫—Å–∏

---

## –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

1. ‚úÖ –õ–æ–∫–∞–ª—å–Ω–æ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å backend:
   - –ó–∞–ø—É—Å—Ç–∏—Ç—å `npm run dev` –≤ `server/`
   - –î–æ–±–∞–≤–∏—Ç—å –æ—Ç–∑—ã–≤ –≤ –±—Ä–∞—É–∑–µ—Ä–µ
   - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å DevTools Network —á—Ç–æ –∑–∞–ø—Ä–æ—Å—ã –∏–¥—É—Ç –Ω–∞ `/api/reviews`

2. ‚úÖ –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –º–æ–¥–µ—Ä–∞—Ü–∏—é:
   - –û—Ç–∫—Ä—ã—Ç—å `/admin`
   - –ü–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å –æ—Ç–∫–ª–æ–Ω–∏—Ç—å –æ–±–∂–∞–ª–æ–≤–∞–Ω–∏–µ
   - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ –∏–¥—ë—Ç `PUT /api/appeals/:id` —Å `X-Admin-Secret`

3. üì¶ –†–∞–∑–≤–µ—Ä–Ω—É—Ç—å –Ω–∞ Render (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ):
   - –°–æ–∑–¥–∞—Ç—å –Ω–æ–≤—ã–π Web Service –¥–ª—è backend
   - –ù–∞—Å—Ç—Ä–æ–∏—Ç—å Environment variables
   - –û–±–Ω–æ–≤–∏—Ç—å —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥ –µ—Å–ª–∏ –Ω—É–∂–Ω—ã –∫—Ä–æ—Å—Å–¥–æ–º–µ–Ω–Ω—ã–µ –≤—ã–∑–æ–≤—ã

4. üîê –£–ª—É—á—à–∏—Ç—å –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å (production):
   - JWT –≤–º–µ—Å—Ç–æ —Å—Ç–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ ADMIN_SECRET
   - Rate limiting
   - –ë–æ–ª–µ–µ –¥–µ—Ç–∞–ª—å–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

---

## –í–æ–ø—Ä–æ—Å—ã?

–°–º–æ—Ç—Ä–∏ `server/README.md` –¥–ª—è –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –ø–æ API.
